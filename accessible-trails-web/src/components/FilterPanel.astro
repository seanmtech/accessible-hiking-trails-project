---
---

<form id="filter-form" class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
  <h3 class="font-semibold text-gray-900 mb-3">Filter by Accessibility</h3>
  <div class="flex flex-col gap-3">
    <div class="flex items-center justify-between hover:bg-gray-50 p-1 rounded transition-colors">
      <label class="flex items-center gap-2 cursor-pointer flex-grow">
        <input type="checkbox" name="accessible_restrooms" class="w-4 h-4 text-green-600 rounded border-gray-300 focus:ring-green-500" />
        <span class="text-gray-700">Accessible Restrooms</span>
      </label>
      <div class="relative group">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-400 cursor-help">
          <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
        </svg>
        <div class="absolute bottom-full right-0 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 pointer-events-none">
          Restrooms designed for wheelchair access with grab bars and wider stalls.
          <div class="absolute top-full right-1 -mt-1 border-4 border-transparent border-t-gray-800"></div>
        </div>
      </div>
    </div>
    
    <div class="flex items-center justify-between hover:bg-gray-50 p-1 rounded transition-colors">
      <label class="flex items-center gap-2 cursor-pointer flex-grow">
        <input type="checkbox" name="accessible_parking" class="w-4 h-4 text-green-600 rounded border-gray-300 focus:ring-green-500" />
        <span class="text-gray-700">Accessible Parking</span>
      </label>
      <div class="relative group">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-400 cursor-help">
          <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
        </svg>
        <div class="absolute bottom-full right-0 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 pointer-events-none">
          Designated parking spots with extra space for ramp/lift vehicles.
          <div class="absolute top-full right-1 -mt-1 border-4 border-transparent border-t-gray-800"></div>
        </div>
      </div>
    </div>
    
    <div class="flex items-center justify-between hover:bg-gray-50 p-1 rounded transition-colors">
      <label class="flex items-center gap-2 cursor-pointer flex-grow">
        <input type="checkbox" name="accessible_trails" class="w-4 h-4 text-green-600 rounded border-gray-300 focus:ring-green-500" />
        <span class="text-gray-700">Accessible Trails</span>
      </label>
      <div class="relative group">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-400 cursor-help">
          <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
        </svg>
        <div class="absolute bottom-full right-0 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 pointer-events-none">
          Trails that are paved or hard-packed, with gentle slopes and wide paths.
          <div class="absolute top-full right-1 -mt-1 border-4 border-transparent border-t-gray-800"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-4 pt-4 border-t border-gray-200">
    <h3 class="font-semibold text-gray-900 mb-3">Distance</h3>
    <label class="flex flex-col gap-1">
      <span class="text-sm text-gray-700">Max Distance (miles)</span>
      <input type="number" name="max_distance" min="0" placeholder="Any" class="w-full p-2 border border-gray-300 rounded focus:ring-green-500 focus:border-green-500" />
    </label>
  </div>
</form>

<script>
  const form = document.getElementById('filter-form') as HTMLFormElement;
  const checkboxes = form.querySelectorAll('input[type="checkbox"]');
  const distanceInput = form.querySelector('input[name="max_distance"]') as HTMLInputElement;

  // Initialize state from URL params
  const urlParams = new URLSearchParams(window.location.search);
  checkboxes.forEach((checkbox) => {
    const input = checkbox as HTMLInputElement;
    if (urlParams.has(input.name)) {
      input.checked = true;
    }
  });
  
  if (urlParams.has('max_distance')) {
    distanceInput.value = urlParams.get('max_distance') || '';
  }

  // Update URL and reload on change
  form.addEventListener('change', () => {
    const params = new URLSearchParams(window.location.search);
    
    checkboxes.forEach((checkbox) => {
      const input = checkbox as HTMLInputElement;
      if (input.checked) {
        params.set(input.name, 'true');
      } else {
        params.delete(input.name);
      }
    });
    
    if (distanceInput.value) {
      params.set('max_distance', distanceInput.value);
    } else {
      params.delete('max_distance');
    }

    window.location.search = params.toString();
  });
</script>
